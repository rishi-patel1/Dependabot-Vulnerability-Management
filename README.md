
# Github Vulnerability Alerts

This pipeline helps automate reporting vulnerabilities found inside a github organisation. The pipeline contains a generic webhook which will trigger the pipeline whenever its called.



## Features

- Create a github issue in the repo
- Send a vulnerability alert on slack channel which contains the affected package info, its severity and which repo the vulnerability was found.


## Installation


- Now inside the delivery pipeline : 

    - In the ___Triggers___ section click on 'Add' and select 'Generic Webhook'. This will give you access to an endpoint which you can add to github so that it will listen to a specific event (in our case - ```repository_vulnerability_alert```). For securing select ```Payload Digest Matches```. Copy the given webhook and store it somewhere temporarily. Then generate or create a secret and copy it and save it to the same file. For the signature source, select 'Header' and select the Header Key Name where the Secrete will be matched.(In our case - ```X-Hub-Signature-256``` ) and select sha256 as the digest algorithm. This allows the post request which github sends to be authorized by matching secret both sides. We will understand where this secret which we copied will be used in github later.
    - ___Environment variables___ section will have the variables which we will be using during the pipeline. Note that the variables listed are specific to this pipeline.
        - __slackUrl__ : This is the url of the slack webhook which is used to send slack alerts to a specific channel. This should be added as a 'secure value' and not a 'text value'.
        - __gitToken__ : This is the personal access token which will be used to authenticate git api requests. This should also be added as a 'secure value'
    The pipeline will then be successfully set up. 
        - __send-alert__ : This specifies if you want to send slack alert or not. Can be 0 or 1
    
    You would now have to add the webhook in the github organization. Follow these steps to add the webhook.

        1. Go to your Github organization settings and select hooks from the left navigation bar.
        2. Click on add webhook to add a new webhook.
        3. Copy the url of the webhook from the file and paste it inside the Payload Url. 
        4. Copy the Secret next and paste it to the secret section
        5. Select "Let me select individual events" and only select "repository vulnerability alerts" from the drop down.
        6. Click on Add webhook.

    Whenever a new vulnerability will be detected by github, it will send a post request with the affected package info to the pipeline. The pipeline will in turn send alerts to slack and create issue on github.
        
    
